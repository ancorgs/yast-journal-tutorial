---
layout: default
---

<h2>A first mockup</h2>

<h3>Adding some widgets</h3>
<p>
The current mockup is not very impressive. Let's start adding some widgets. Our
first though could be: we need a table to display the log entries, some radio
buttons to choose the boot, some checkboxes to enable and disable filters,
a button to refresh the entries table when the filters change and, of course, a
button to quit. That's already a lot of widgets and some layout. Challenging
enough. Let's go for it.
</p>
<p>
Link to UI reference for layout documentation. But nothing better than some
example code and this url is packed with nice examples
https://github.com/yast/yast-ycp-ui-bindings/tree/master/examples
</p>

<h3>Taking a look to the code</h3>
Feel free to start modifying MockupDialog yourself. When you are done (or right
away if you are impatient), check the example.

{% highlight bash %}
git checkout first_mockup
{% endhighlight %}

<p>
Only mockup_dialog has changed. The run method is not so straightforward now. It
includes a rudimentary event loop. libyui is not event-driven because is not
needed in most dialogs, due to the typical YaST application workflow. In the
next step, we'll see a clear example of such a typical YaST dialog.
</p>

<h3>Checking the result in ncurses</h3>
<p>
You want to check how it looks, so you execute:
</p>
{% highlight bash %}
Y2DIR=src/ /usr/sbin/yast2 mockup
{% endhighlight %}

<p>
If you are not specially picky, the graphical interface looks acceptable. It's
quite cluttered but still usable. Sure there are some layout issues but you
think they could be fixed with no much work. After all, you have decided to
start writing a YaST module from scratch, so sure you are an optimistic person.
</p>
<p>
But there is something you never should forget when developing a YaST module, it
should work with curses with a resolution of 80 columns and 25 lines.
So next step is to resize your xterm to a size of 80x25 and run:
</p>
{% highlight bash %}
Y2DIR=src/ /usr/sbin/yast2 --ncurses mockup
{% endhighlight %}

<h3>Let's try again</h3>
<p>
The result looked far from perfect in graphical mode, but with ncurses and 80x25
it looks almost catastrophic. Almost no space is left for the log entries, which
is the most relevant part. Needless to say, it will become even worst if we add
more filters in the future. We need to rethink our UI to avoid having everything
in one single dialog. Time for the <a hef="step3.hml">next step</a>.
</p>
